{% extends 'master' %}

{% block content %}

  <h1>{{ profile.fullName }} <a href="{{ profile.url }}">{{ profile.url }}</a></h1>

  {% include 'flash_messages' %}

  {% if profile.shortDescription %}
    <p>{{ profile.shortDescription }}</p>
  {% endif %}
  <p>
    {% if currentUser %}
      <button type="button" class="btn btn-default btn-ghost btn-follow">Follow</button>
    {% endif %}
    <a href="{{ profile.url }}/followers">{{ profile.followers_count }} followers</a>
    <a href="{{ profile.url }}/following">{{ profile.following_count }} following</a>
    {% if canEdit %}
      <a href="{{ profile.url }}/edit">Edit profile</a>
    {% endif %}
  </p>

  <script type="text/javascript">
    var btn = document.querySelector('button.btn-follow');
    if (btn) {
      btn.addEventListener('click', function () {
        if (btn.innerHTML == 'Following') {
          btn.innerHTML = 'Follow';
        } else {
          btn.innerHTML = 'Following';
        }
      });
    }
  </script>

  {% block profile %}
    {% markdown %}
    {{ profile.longDescription }}
    {% endmarkdown %}
  {% endblock %}

{% endblock %}
